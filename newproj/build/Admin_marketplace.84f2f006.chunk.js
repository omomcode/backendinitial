"use strict";(self.webpackChunknewproj=self.webpackChunknewproj||[]).push([[9140],{17522:(Pe,I,n)=>{n.d(I,{d:()=>x});var e=n(21272);function x(S,D){const[j,P]=e.useState(S);return e.useEffect(()=>{const N=setTimeout(()=>{P(S)},D);return()=>{clearTimeout(N)}},[S,D]),j}},85027:(Pe,I,n)=>{n.r(I),n.d(I,{MarketPlacePage:()=>ue,default:()=>Et});var e=n(21272),x=n(42455),S=n(38413),D=n(4198),j=n(12081),P=n(83997),N=n(12408),h=n(94061),Ee=n(7297),F=n(24093),g=n(80403),ve=n(14718),E=n(54894),Me=n(82437),ye=n(17522),be=n(71526),C=n(58805),ke=n(4767),J=n(14595);const Re=()=>{const{formatMessage:a}=(0,E.A)(),{trackUsage:s}=(0,g.z1)();return e.createElement("a",{href:"https://strapi.canny.io/plugin-requests",target:"_blank",rel:"noopener noreferrer nofollow",style:{textDecoration:"none"},onClick:()=>s("didMissMarketplacePlugin")},e.createElement(g.bQ,{title:a({id:"admin.pages.MarketPlacePage.missingPlugin.title",defaultMessage:"Documentation"}),subtitle:a({id:"admin.pages.MarketPlacePage.missingPlugin.description",defaultMessage:"Tell us what plugin you are looking for and we'll let our community plugin developers know in case they are in search for inspiration!"}),icon:e.createElement(ke.A,null),iconBackground:"alternative100",endAction:e.createElement(C.I,{as:J.A,color:"neutral600",width:3,height:3,marginLeft:2})}))};var Ce=n(52993),w=n(85963),Se=n(68802),Te=n(28604),Ae=n(33544),t=n.n(Ae),T=n(79793),Ne=n(12493),X=n(43739),Z=n(95336);const _=({message:a,value:s,onChange:i,possibleFilters:l,onClear:r,customizeContent:d})=>{const o=(c,u)=>`${c} (${u})`;return e.createElement(X.l,{"data-testid":`${a}-button`,label:a,placeholder:a,size:"M",onChange:i,onClear:r,value:s,customizeContent:d,multi:!0},Object.entries(l).map(([c,u])=>e.createElement(Z.c,{"data-testid":`${c}-${u}`,key:c,value:c},o(c,u))))};_.propTypes={message:t().string.isRequired,value:t().array.isRequired,onChange:t().func.isRequired,possibleFilters:t().object.isRequired,onClear:t().func.isRequired,customizeContent:t().func.isRequired};const ee=_,te=({source:a,onToggle:s,query:i,npmPackageType:l,possibleCategories:r,possibleCollections:d,handleSelectChange:o,handleSelectClear:c})=>{const{formatMessage:u}=(0,E.A)();return e.createElement(Ne.AM,{source:a,onDismiss:s,padding:3,spacing:4},e.createElement(xe,{direction:"column",alignItems:"stretch",gap:1},e.createElement(ee,{message:u({id:"admin.pages.MarketPlacePage.filters.collections",defaultMessage:"Collections"}),value:i?.collections||[],onChange:m=>{o({collections:m})},onClear:()=>c("collections"),possibleFilters:d,customizeContent:m=>u({id:"admin.pages.MarketPlacePage.filters.collectionsSelected",defaultMessage:"{count, plural, =0 {No collections} one {# collection} other {# collections}} selected"},{count:m.length})}),l==="plugin"&&e.createElement(ee,{message:u({id:"admin.pages.MarketPlacePage.filters.categories",defaultMessage:"Categories"}),value:i?.categories||[],onChange:m=>{o({categories:m})},onClear:()=>c("categories"),possibleFilters:r,customizeContent:m=>u({id:"admin.pages.MarketPlacePage.filters.categoriesSelected",defaultMessage:"{count, plural, =0 {No categories} one {# category} other {# categories}} selected"},{count:m.length}),name:"categories"})))};te.propTypes={onToggle:t().func.isRequired,source:t().shape({current:t().instanceOf(Element)}).isRequired,query:t().object.isRequired,npmPackageType:t().oneOf(["plugin","provider"]).isRequired,possibleCollections:t().object.isRequired,possibleCategories:t().object.isRequired,handleSelectChange:t().func.isRequired,handleSelectClear:t().func.isRequired};const Ie=te,xe=(0,T.Ay)(P.s)`
  /* Hide the label, every input needs a label. */
  label {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
  }
`,V=({name:a,handleRemove:s})=>e.createElement(h.a,{padding:1},e.createElement(Ce.v,{icon:e.createElement(Se.A,null),onClick:s},a)),De=(0,T.Ay)(w.$)`
  height: ${({theme:a})=>a.sizes.input.S};
`,ae=({possibleCollections:a,possibleCategories:s,npmPackageType:i,query:l,handleSelectClear:r,handleSelectChange:d})=>{const[o,c]=(0,e.useState)(!1),u=(0,e.useRef)(),{formatMessage:m}=(0,E.A)(),f=()=>c(p=>!p),v=(p,M)=>{const k={[M]:l[M].filter(A=>A!==p)};d(k)};return e.createElement(e.Fragment,null,e.createElement(h.a,{paddingTop:1,paddingBottom:1},e.createElement(De,{variant:"tertiary",ref:u,startIcon:e.createElement(Te.A,null),onClick:f,size:"S"},m({id:"app.utils.filters",defaultMessage:"Filters"})),o&&e.createElement(Ie,{onToggle:f,source:u,query:l,handleSelectClear:r,handleSelectChange:d,possibleCollections:a,possibleCategories:s,npmPackageType:i})),l.collections?.map(p=>e.createElement(V,{name:p,key:p,handleRemove:()=>v(p,"collections")})),i==="plugin"&&l.categories?.map(p=>e.createElement(V,{name:p,key:p,handleRemove:()=>v(p,"categories")})))};V.propTypes={name:t().string.isRequired,handleRemove:t().func.isRequired},ae.propTypes={npmPackageType:t().oneOf(["plugin","provider"]).isRequired,possibleCollections:t().object.isRequired,possibleCategories:t().object.isRequired,query:t().object.isRequired,handleSelectChange:t().func.isRequired,handleSelectClear:t().func.isRequired};const $e=ae;var Le=n(43064),ze=n(90151),Be=n(68074),b=n(30893),Oe=n(36481),je=n(81035);const Fe=(0,T.Ay)(h.a)`
  background: ${({theme:a})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${a.colors.neutral150} 100%)`};
  opacity: 0.33;
`,we=()=>e.createElement(je.J,null,Array(12).fill(null).map((a,s)=>e.createElement(Fe,{key:`empty-plugin-card-${s}`,height:"234px",hasRadius:!0}))),ne=({content:a})=>e.createElement(h.a,{position:"relative"},e.createElement(we,null),e.createElement(h.a,{position:"absolute",top:11,width:"100%"},e.createElement(P.s,{alignItems:"center",justifyContent:"center",direction:"column"},e.createElement(C.I,{as:Oe.A,color:"",width:"160px",height:"88px"}),e.createElement(h.a,{paddingTop:6},e.createElement(b.o,{variant:"delta",as:"p",textColor:"neutral600"},a)))));ne.propTypes={content:t().string.isRequired};const Ve=ne;var G=n(79739),se=n(49654),Ge=n(85166),Ue=n(21835),He=n.n(Ue),qe=n(58786),Qe=n(54514),re=n(90625),We=n(35225),ie=n.n(We);const $=({description:a,installMessage:s,disabled:i,handleCopy:l,pluginName:r})=>e.createElement(G.m,{"data-testid":`tooltip-${r}`,description:a},e.createElement(h.a,null,e.createElement(w.$,{size:"S",startIcon:e.createElement(re.A,null),variant:"secondary",disabled:i,onClick:l},s))),U=({strapiPeerDepVersion:a,strapiAppVersion:s,handleCopy:i,pluginName:l})=>{const{formatMessage:r}=(0,E.A)(),d=ie().validRange(a),o=ie().satisfies(s,d),c=r({id:"admin.pages.MarketPlacePage.plugin.copy",defaultMessage:"Copy install command"});if(s){if(!d)return e.createElement($,{installMessage:c,pluginName:l,description:r({id:"admin.pages.MarketPlacePage.plugin.version.null",defaultMessage:'Unable to verify compatibility with your Strapi version: "{strapiAppVersion}"'},{strapiAppVersion:s}),handleCopy:i});if(!o)return e.createElement($,{installMessage:c,pluginName:l,description:r({id:"admin.pages.MarketPlacePage.plugin.version",defaultMessage:'Update your Strapi version: "{strapiAppVersion}" to: "{versionRange}"'},{strapiAppVersion:s,versionRange:d}),disabled:!0})}return e.createElement(w.$,{size:"S",startIcon:e.createElement(re.A,null),variant:"secondary",onClick:i},c)};$.defaultProps={disabled:!1,handleCopy:null},$.propTypes={description:t().string.isRequired,installMessage:t().string.isRequired,disabled:t().bool,handleCopy:t().func,pluginName:t().string.isRequired},U.defaultProps={strapiAppVersion:null,strapiPeerDepVersion:null},U.propTypes={strapiAppVersion:t().string,strapiPeerDepVersion:t().string,handleCopy:t().func.isRequired,pluginName:t().string.isRequired};const Ye=U,H=({isInstalled:a,isInDevelopmentMode:s,commandToCopy:i,strapiAppVersion:l,strapiPeerDepVersion:r,pluginName:d})=>{const o=(0,g.hN)(),{formatMessage:c}=(0,E.A)(),{trackUsage:u}=(0,g.z1)(),{copy:m}=(0,g.iD)(),f=async()=>{await m(i)&&(u("willInstallPlugin"),o({type:"success",message:{id:"admin.pages.MarketPlacePage.plugin.copy.success"}}))};return a?e.createElement(h.a,{paddingLeft:4},e.createElement(C.I,{as:Qe.A,marginRight:2,width:12,height:12,color:"success600"}),e.createElement(b.o,{variant:"omega",textColor:"success600",fontWeight:"bold"},c({id:"admin.pages.MarketPlacePage.plugin.installed",defaultMessage:"Installed"}))):s?e.createElement(Ye,{strapiAppVersion:l,strapiPeerDepVersion:r,handleCopy:f,pluginName:d}):null};H.defaultProps={strapiAppVersion:null,strapiPeerDepVersion:null},H.propTypes={isInstalled:t().bool.isRequired,isInDevelopmentMode:t().bool.isRequired,commandToCopy:t().string.isRequired,strapiAppVersion:t().string,strapiPeerDepVersion:t().string,pluginName:t().string.isRequired};const Ke=H;var Je=n(48653),Xe=n(40799),Ze=n(42386),_e=n(93714);const et=(0,T.Ay)(Je.c)`
  width: ${(0,g.a8)(12)};
  transform: rotate(90deg);
`,q=({githubStars:a,npmDownloads:s,npmPackageType:i})=>{const{formatMessage:l}=(0,E.A)();return e.createElement(P.s,{gap:1},!!a&&e.createElement(e.Fragment,null,e.createElement(C.I,{as:Xe.A,height:(0,g.a8)(12),width:(0,g.a8)(12),"aria-hidden":!0}),e.createElement(C.I,{as:Ze.A,height:(0,g.a8)(12),width:(0,g.a8)(12),color:"warning500","aria-hidden":!0}),e.createElement("p",{"aria-label":l({id:`admin.pages.MarketPlacePage.${i}.githubStars`,defaultMessage:"This {package} was starred {starsCount} on GitHub"},{starsCount:a,package:i})},e.createElement(b.o,{variant:"pi",textColor:"neutral800"},a)),e.createElement(et,{unsetMargin:!1,background:"neutral200"})),e.createElement(C.I,{as:_e.A,height:(0,g.a8)(12),width:(0,g.a8)(12),"aria-hidden":!0}),e.createElement("p",{"aria-label":l({id:`admin.pages.MarketPlacePage.${i}.downloads`,defaultMessage:"This {package} has {downloadsCount} weekly downloads"},{downloadsCount:s,package:i})},e.createElement(b.o,{variant:"pi",textColor:"neutral800"},s)))};q.defaultProps={githubStars:0,npmDownloads:0},q.propTypes={githubStars:t().number,npmDownloads:t().number,npmPackageType:t().string.isRequired};const tt=q,at=(0,T.Ay)(b.o)`
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  overflow: hidden;
`,Q=({npmPackage:a,isInstalled:s,useYarn:i,isInDevelopmentMode:l,npmPackageType:r,strapiAppVersion:d})=>{const{attributes:o}=a,{formatMessage:c}=(0,E.A)(),{trackUsage:u}=(0,g.z1)(),m=i?`yarn add ${o.npmPackageName}`:`npm install ${o.npmPackageName}`,f=c({id:"admin.pages.MarketPlacePage.plugin.tooltip.madeByStrapi",defaultMessage:"Made by Strapi"}),v=`https://market.strapi.io/${He().plural(r)}/${o.slug}`;return e.createElement(P.s,{direction:"column",justifyContent:"space-between",paddingTop:4,paddingRight:4,paddingBottom:4,paddingLeft:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",height:"100%",alignItems:"normal","data-testid":"npm-package-card"},e.createElement(h.a,null,e.createElement(P.s,{direction:"row",justifyContent:"space-between",alignItems:"flex-start"},e.createElement(h.a,{as:"img",src:o.logo.url,alt:`${o.name} logo`,hasRadius:!0,width:11,height:11}),e.createElement(tt,{githubStars:o.githubStars,npmDownloads:o.npmDownloads,npmPackageType:r})),e.createElement(h.a,{paddingTop:4},e.createElement(b.o,{as:"h3",variant:"delta"},e.createElement(P.s,{alignItems:"center"},o.name,o.validated&&!o.madeByStrapi&&e.createElement(G.m,{description:c({id:"admin.pages.MarketPlacePage.plugin.tooltip.verified",defaultMessage:"Plugin verified by Strapi"})},e.createElement(P.s,null,e.createElement(C.I,{as:Ge.A,marginLeft:2,color:"success600"}))),o.madeByStrapi&&e.createElement(G.m,{description:f},e.createElement(P.s,null,e.createElement(h.a,{as:"img",src:qe,alt:f,marginLeft:1,width:6,height:"auto"})))))),e.createElement(h.a,{paddingTop:2},e.createElement(at,{as:"p",variant:"omega",textColor:"neutral600"},o.description))),e.createElement(P.s,{gap:2,style:{alignSelf:"flex-end"},paddingTop:6},e.createElement(se.z,{size:"S",href:v,isExternal:!0,endIcon:e.createElement(J.A,null),"aria-label":c({id:"admin.pages.MarketPlacePage.plugin.info.label",defaultMessage:"Learn more about {pluginName}"},{pluginName:o.name}),variant:"tertiary",onClick:()=>u("didPluginLearnMore")},c({id:"admin.pages.MarketPlacePage.plugin.info.text",defaultMessage:"More"})),e.createElement(Ke,{isInstalled:s,isInDevelopmentMode:l,commandToCopy:m,strapiAppVersion:d,strapiPeerDepVersion:o.strapiVersion,pluginName:o.name})))};Q.defaultProps={isInDevelopmentMode:!1,strapiAppVersion:null},Q.propTypes={npmPackage:t().shape({id:t().string.isRequired,attributes:t().shape({name:t().string.isRequired,description:t().string.isRequired,slug:t().string.isRequired,npmPackageName:t().string.isRequired,npmPackageUrl:t().string.isRequired,repositoryUrl:t().string.isRequired,logo:t().object.isRequired,developerName:t().string.isRequired,validated:t().bool.isRequired,madeByStrapi:t().bool.isRequired,strapiCompatibility:t().oneOf(["v3","v4"]),strapiVersion:t().string,githubStars:t().number,npmDownloads:t().number}).isRequired}).isRequired,isInstalled:t().bool.isRequired,useYarn:t().bool.isRequired,isInDevelopmentMode:t().bool,npmPackageType:t().string.isRequired,strapiAppVersion:t().string};const nt=Q,W=({status:a,npmPackages:s,installedPackageNames:i,useYarn:l,isInDevelopmentMode:r,npmPackageType:d,strapiAppVersion:o,debouncedSearch:c})=>{const{formatMessage:u}=(0,E.A)();if(a==="error")return e.createElement(P.s,{paddingTop:8},e.createElement(g.hH,null));if(a==="loading")return e.createElement(P.s,{justifyContent:"center",paddingTop:8},e.createElement(Le.a,null,"Loading content..."));const m=u({id:"admin.pages.MarketPlacePage.search.empty",defaultMessage:'No result for "{target}"'},{target:c});return s.length===0?e.createElement(Ve,{content:m}):e.createElement(ze.x,{gap:4},s.map(f=>e.createElement(Be.E,{col:4,s:6,xs:12,style:{height:"100%"},key:f.id},e.createElement(nt,{npmPackage:f,isInstalled:i.includes(f.attributes.npmPackageName),useYarn:l,isInDevelopmentMode:r,npmPackageType:d,strapiAppVersion:o}))))};W.defaultProps={npmPackages:[],installedPackageNames:[],strapiAppVersion:null,debouncedSearch:""},W.propTypes={status:t().string.isRequired,npmPackages:t().array,installedPackageNames:t().arrayOf(t().string),useYarn:t().bool.isRequired,isInDevelopmentMode:t().bool.isRequired,npmPackageType:t().string.isRequired,strapiAppVersion:t().string,debouncedSearch:t().string};const le=W,oe=({pagination:a})=>e.createElement(h.a,{paddingTop:4},e.createElement(P.s,{alignItems:"flex-end",justifyContent:"space-between"},e.createElement(g._u,{options:["12","24","50","100"],defaultValue:"24"}),e.createElement(g.W7,{pagination:a})));oe.propTypes={pagination:t().shape({page:t().number.isRequired,pageCount:t().number.isRequired,pageSize:t().number.isRequired,total:t().number.isRequired}).isRequired};const st=oe,rt=n.p+"9d5d788027e86620c234.svg";var it=n(55356),lt=n(89089);const Y=({isOnline:a,npmPackageType:s})=>{const{formatMessage:i}=(0,E.A)(),{trackUsage:l}=(0,g.z1)(),r=s==="provider"?"didSubmitProvider":"didSubmitPlugin";return e.createElement(it.Q,{title:i({id:"global.marketplace",defaultMessage:"Marketplace"}),subtitle:i({id:"admin.pages.MarketPlacePage.subtitle",defaultMessage:"Get more out of Strapi"}),primaryAction:a&&e.createElement(se.z,{startIcon:e.createElement(lt.A,null),variant:"tertiary",href:`https://market.strapi.io/submit-${s}`,onClick:()=>l(r),isExternal:!0},i({id:`admin.pages.MarketPlacePage.submit.${s}.link`,defaultMessage:`Submit ${s}`}))})},ce=Y;Y.defaultProps={npmPackageType:"plugin"},Y.propTypes={isOnline:t().bool.isRequired,npmPackageType:t().string};const ot=()=>{const{formatMessage:a}=(0,E.A)();return e.createElement(x.P,null,e.createElement(S.g,null,e.createElement(ce,{isOnline:!1}),e.createElement(P.s,{width:"100%",direction:"column",alignItems:"center",justifyContent:"center",paddingTop:(0,g.a8)(120)},e.createElement(h.a,{paddingBottom:2},e.createElement(b.o,{textColor:"neutral700",variant:"alpha"},a({id:"admin.pages.MarketPlacePage.offline.title",defaultMessage:"You are offline"}))),e.createElement(h.a,{paddingBottom:6},e.createElement(b.o,{textColor:"neutral700",variant:"epsilon"},a({id:"admin.pages.MarketPlacePage.offline.subtitle",defaultMessage:"You need to be connected to the Internet to access Strapi Market."}))),e.createElement("img",{src:rt,alt:"offline",style:{width:"88px",height:"88px"}}))))},ct=(0,T.Ay)(h.a)`
  font-weight: ${({theme:a})=>a.fontWeights.semiBold};

  span {
    font-size: ${({theme:a})=>a.fontSizes[1]};
  }

  /* Hide the label, every input needs a label. */
  label {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
  }
`,de=({sortQuery:a,handleSelectChange:s})=>{const{formatMessage:i}=(0,E.A)(),l={"name:asc":{selected:{id:"admin.pages.MarketPlacePage.sort.alphabetical.selected",defaultMessage:"Sort by alphabetical order"},option:{id:"admin.pages.MarketPlacePage.sort.alphabetical",defaultMessage:"Alphabetical order"}},"submissionDate:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.newest.selected",defaultMessage:"Sort by newest"},option:{id:"admin.pages.MarketPlacePage.sort.newest",defaultMessage:"Newest"}},"githubStars:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.githubStars.selected",defaultMessage:"Sort by GitHub stars"},option:{id:"admin.pages.MarketPlacePage.sort.githubStars",defaultMessage:"Number of GitHub stars"}},"npmDownloads:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.npmDownloads.selected",defaultMessage:"Sort by npm downloads"},option:{id:"admin.pages.MarketPlacePage.sort.npmDownloads",defaultMessage:"Number of downloads"}}};return e.createElement(ct,null,e.createElement(X.l,{size:"S",id:"sort-by-select",value:a,customizeContent:()=>i(l[a].selected),onChange:r=>{s({sort:r})},label:i({id:"admin.pages.MarketPlacePage.sort.label",defaultMessage:"Sort by"})},Object.entries(l).map(([r,d])=>e.createElement(Z.c,{key:r,value:r},i(d.option)))))};de.propTypes={sortQuery:t().string.isRequired,handleSelectChange:t().func.isRequired};const dt=de,gt=()=>{const a=typeof navigator<"u"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,[s,i]=e.useState(a),l=()=>i(!0),r=()=>i(!1);return e.useEffect(()=>(window.addEventListener("online",l),window.addEventListener("offline",r),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",r)}),[]),s};var pt=n(11273),ut=n(5409),L=n.n(ut),ge=n(74930);const pe="https://market-api.strapi.io",mt=(a,s={})=>{const i=(0,g.hN)();return(0,ge.useQuery)(["marketplace","plugins",s],async()=>{try{const l=L().stringify(L().parse(s)),r=await fetch(`${pe}/plugins?${l}`);if(!r.ok)throw new Error("Failed to fetch marketplace plugins.");return await r.json()}catch{}return null},{onSuccess(){a&&a()},onError(){i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})},ft=(a,s={})=>{const i=(0,g.hN)();return(0,ge.useQuery)(["marketplace","providers",s],async()=>{try{const l=L().stringify(L().parse(s)),r=await fetch(`${pe}/providers?${l}`);if(!r.ok)throw new Error("Failed to fetch marketplace providers.");return await r.json()}catch{}return null},{onSuccess(){a&&a()},onError(){i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};function ht({npmPackageType:a,debouncedSearch:s,query:i,tabQuery:l}){const{notifyStatus:r}=(0,pt.W)(),{formatMessage:d}=(0,E.A)(),o=d({id:"global.marketplace",defaultMessage:"Marketplace"}),c=()=>{r(d({id:"app.utils.notify.data-loaded",defaultMessage:"The {target} has loaded"},{target:o}))},u={page:i?.page||1,pageSize:i?.pageSize||24},{data:m,status:f}=mt(c,{...l.plugin,pagination:u,search:s}),{data:v,status:p}=ft(c,{...l.provider,pagination:u,search:s}),M=a==="plugin"?m:v,k=a==="plugin"?f:p,[A,z]=(0,e.useState)({}),[B,O]=(0,e.useState)({});(0,e.useEffect)(()=>{k==="success"&&z(M.meta.collections),f==="success"&&O(m.meta.categories)},[m?.meta.categories,f,M?.meta.collections,k]);const{pagination:K}=k==="success"?M.meta:{};return{pluginsResponse:m,providersResponse:v,pluginsStatus:f,providersStatus:p,possibleCollections:A,possibleCategories:B,pagination:K}}const Pt=ht,ue=()=>{const{formatMessage:a}=(0,E.A)(),{trackUsage:s}=(0,g.z1)(),i=(0,e.useRef)(s),l=(0,g.hN)(),[{query:r},d]=(0,g.sq)(),o=(0,ye.d)(r?.search,500)||"",{autoReload:c,dependencies:u,useYarn:m,strapiVersion:f}=(0,g.Xe)(),v=gt(),p=r?.npmPackageType||"plugin",[M,k]=(0,e.useState)({plugin:p==="plugin"?{...r}:{},provider:p==="provider"?{...r}:{}});(0,g.L4)(),(0,e.useEffect)(()=>{i.current("didGoToMarketplace")},[]),(0,e.useEffect)(()=>{c||l({type:"info",message:{id:"admin.pages.MarketPlacePage.production",defaultMessage:"Manage plugins from the development environment"}})},[l,c]);const{pluginsResponse:A,providersResponse:z,pluginsStatus:B,providersStatus:O,possibleCollections:K,possibleCategories:vt,pagination:me}=Pt({npmPackageType:p,debouncedSearch:o,query:r,tabQuery:M});if(!v)return e.createElement(ot,null);const Mt=R=>{const y=R===0?"plugin":"provider",bt=M[y]&&Object.keys(M[y]).length;d(bt?{...M[y],search:r?.search||"",npmPackageType:y,page:1}:{npmPackageType:y,collections:[],categories:[],sort:"name:asc",page:1,search:r?.search||""})},fe=R=>{d({...R,page:1}),k(y=>({...y,[p]:{...y[p],...R}}))},yt=R=>{d({[R]:[],page:null},"remove"),k(y=>({...y,[p]:{}}))},he=Object.keys(u);return e.createElement(x.P,null,e.createElement(S.g,null,e.createElement(ve.m,{title:a({id:"admin.pages.MarketPlacePage.helmet",defaultMessage:"Marketplace - Plugins"})}),e.createElement(ce,{isOnline:v,npmPackageType:p}),e.createElement(D.s,null,e.createElement(j.f,{label:a({id:"admin.pages.MarketPlacePage.tab-group.label",defaultMessage:"Plugins and Providers for Strapi"}),id:"tabs",variant:"simple",initialSelectedTabIndex:["plugin","provider"].indexOf(p),onTabChange:Mt},e.createElement(P.s,{justifyContent:"space-between",paddingBottom:4},e.createElement(N.t,null,e.createElement(N.o,null,a({id:"admin.pages.MarketPlacePage.plugins",defaultMessage:"Plugins"})," ",B==="success"?`(${A.meta.pagination.total})`:"..."),e.createElement(N.o,null,a({id:"admin.pages.MarketPlacePage.providers",defaultMessage:"Providers"})," ",O==="success"?`(${z.meta.pagination.total})`:"...")),e.createElement(h.a,{width:"25%"},e.createElement(Ee.S,{name:"searchbar",onClear:()=>d({search:"",page:1}),value:r?.search,onChange:R=>d({search:R.target.value,page:1}),clearLabel:a({id:"admin.pages.MarketPlacePage.search.clear",defaultMessage:"Clear the search"}),placeholder:a({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})},a({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})))),e.createElement(P.s,{paddingBottom:4,gap:2},e.createElement(dt,{sortQuery:r?.sort||"name:asc",handleSelectChange:fe}),e.createElement($e,{npmPackageType:p,possibleCollections:K,possibleCategories:vt,query:r||{},handleSelectChange:fe,handleSelectClear:yt})),e.createElement(F.T,null,e.createElement(F.K,null,e.createElement(le,{npmPackages:A?.data,status:B,installedPackageNames:he,useYarn:m,isInDevelopmentMode:c,npmPackageType:"plugin",strapiAppVersion:f,debouncedSearch:o})),e.createElement(F.K,null,e.createElement(le,{npmPackages:z?.data,status:O,installedPackageNames:he,useYarn:m,isInDevelopmentMode:c,npmPackageType:"provider",debouncedSearch:o})))),me&&e.createElement(st,{pagination:me}),e.createElement(h.a,{paddingTop:8},e.createElement(Re,null)))))},Et=()=>{const a=(0,Me.d4)(be.G);return e.createElement(g.kz,{permissions:a.marketplace.main},e.createElement(ue,null))}}}]);
